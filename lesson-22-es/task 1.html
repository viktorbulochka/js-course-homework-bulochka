<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Single Page Application — навигация внутри приложения</title>
</head>
<body>
<h2 style="text-align: center">Task 1</h2>

<div id='IPage'></div>

<script>
    window.onhashchange = SwitchToStateFromURLHash;

    var SPAStateH = {};


    var PhotosH =
        {
            1: {image: "img/Hilu3.jpg", comment: "собака Шарик"},
            2: {image: "img/Retriever3.jpg", comment: "собака Барбос"}
        };

    function SwitchToStateFromURLHash() {
        var URLHash = window.location.hash;

        var StateJSON = decodeURIComponent(URLHash.substr(1));


        if (StateJSON !== "")

            SPAStateH = JSON.parse(StateJSON);
        else
            SPAStateH = {pagename: 'Main'};

        console.log('Новое состояние приложения:');
        console.log(SPAStateH);


        var PageHTML = "";

        switch (SPAStateH.pagename) {
            case 'Main':
                PageHTML += "<h3>Энциклопедия</h3>";
                PageHTML += "<input type=button value='Список статей здесь' onclick='SwitchToContentPage()'>";
                break;
            case 'Content':
                PageHTML += "<h3>Оглавление</h3>";
                PageHTML += "<span>А</span> " + "<br>" +
                    "<input value='cтатья 1' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 2' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 3' type='button' onclick='SwitchToAboutPage()'>" + "<br>"
                PageHTML += " <span>Б</span> " + "<br>" +
                    "<input value='cтатья 1' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 2' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 3' type='button' onclick='SwitchToAboutPage()'>" + "<br>";
                PageHTML += "<span>Г</span> " + "<br>" +
                    "<input value='cтатья 1' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 2' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 3' type='button' onclick='SwitchToAboutPage()'> " + "<br>";
                PageHTML += " <span>П</span> " + "<br>" +
                    "<input value='cтатья 1' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 2' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 3' type='button' onclick='SwitchToAboutPage()'>" + "<br>";
                PageHTML += " <span>Р</span> " + "<br>" +
                    "<input value='cтатья 1' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 2' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 3' type='button' onclick='SwitchToAboutPage()'>";
                break;
            case 'About':
                PageHTML += "<h3>Название статьи</h3>";
                PageHTML += "<p><span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus amet delectus fuga? Autem quis quos tempore temporibus. Alias dignissimos earum fugiat laboriosam nulla possimus, quas! Delectus molestiae nobis odit vitae?</span><span>Architecto dolore ex ipsum minima nam rem sunt veniam! Beatae ducimus fugiat id ipsum nam nesciunt obcaecati quas quia sequi vero? Culpa iste, optio. " +
                    "Consequuntur fugit perferendis quia reprehenderit soluta?</span></p>";
                PageHTML +=
                    "<input value='cтатья 1' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 2' type='button' onclick='SwitchToAboutPage()'>" + "<br>" +
                    "<input value='cтатья 3' type='button' onclick='SwitchToAboutPage()'>";
                break;
        }
        document.getElementById('IPage').innerHTML = PageHTML;
        /*Всё, страница сформирована! Теперь, каким бы способом ни была изменена закладка
        URL-а — программно, вручную, кнопками браузера "Назад" или "Вперёд" — автоматически
        возникает событие hashchange и страница перекомпонуется под новую закладку.
        */
    }

    // устанавливает в закладке УРЛа новое состояние приложения
    // и затем устанавливает+отображает это состояние
    function SwitchToState(NewStateH) {
        // устанавливаем закладку УРЛа (кодируя как положено любые компоненты УРЛ)
        // нужно для правильной работы кнопок навигации браузера
        // (т.к. записывается новый элемент истории просмотренных страниц)
        // и для возможности передачи УРЛа другим лицам
        location.hash = encodeURIComponent(JSON.stringify(NewStateH));

        // АВТОМАТИЧЕСКИ вызовется SwitchToStateFromURLHash()
        // т.к. закладка УРЛа изменилась (ЕСЛИ она действительно изменилась)
    }

    function SwitchToContentPage() {
        SwitchToState({pagename: 'Content'});
    }

    function SwitchToAboutPage() {
        SwitchToState({pagename: 'About'});
    }

    // переключаемся в состояние, которое сейчас прописано в закладке УРЛ
    SwitchToStateFromURLHash();

</script>


</body>
</html>